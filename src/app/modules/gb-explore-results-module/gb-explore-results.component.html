<div class="medco-results-container">

  <div class="medco-results-chart-container">
    <canvas #perSiteCountsChartElement id="medco-results-chart">{{ perSiteCountsChart }}</canvas>
  </div>

  <hr />

  <p-table [value]="perSiteCounts | async">
    <ng-template pTemplate="header">
      <tr>
        <th>Clinical Site</th>
        <th>Number of subjects</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-count let-idx="rowIndex">
      <tr>
        <td>{{nodesName[idx]}}</td>
        <td>{{count}}</td>
      </tr>
    </ng-template>
  </p-table>

  <hr />

  <div *ngIf="queryService.query.hasPatientLists">
    <p-table [value]="patientLists | async">
      <ng-template pTemplate="header">
        <tr>
          <th>Patient List</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-count let-idx="rowIndex">
        <tr>
          <td><span>{{nodesName[idx]}}: </span>
            <i>
              <span>{{count}}</span>
            </i>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <p></p>
    &nbsp;  <button type="button"
                    (click)="savePatientListToCSVFile()"
                    class="btn btn-outline-primary btn-sm gb-data-selection-overview-panel-btn">
    <span>Export</span>
  </button>
  </div>
</div>
